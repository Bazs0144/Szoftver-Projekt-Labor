package szkeleton;

import java.util.HashMap;
import java.io.OutputStream;
import java.io.PrintStream;
import java.util.ArrayList;

public final class Szkeleton {
	private static int numberOfTabs = -1;
	private static PrintStream printStreamOriginal = System.out;
	public static HashMap<Object, String> objects = new HashMap<Object, String>();;

    /**
     * Kiírja az adott függvényt indentálva, objektummal elhelyezve.
     * @param message A függvény maga.
     * @param in true = meghívott, false = visszatér.
     * @param o Az objektum, amin meghívódott.
     */
	public static void printFunction(String message, boolean in, Object o) {
		printTabs(in);
		System.out.println(message + ": " + objects.get(o));
	}

    /**
     * Az átláthatóság kedvéért nincs spam az outputon.
     * @param b true = engedélyezi az outputot, false = nem engedélyezi.
     */
	public static void enableOutput(boolean b) {
		if(!b) {
			System.setOut(new PrintStream(new OutputStream(){
				public void write(int b) {
				}
			}));
		}
		else System.setOut(printStreamOriginal);
	}

    /**
     * Az indentálásért felelõs függvény.
     * @param in true = meghívott, false = visszatér.
     */
	public static void printTabs(boolean in) {
		if (in) numberOfTabs++;
		for (int i = 0; i < numberOfTabs; i++)
			System.out.print('\t');
		if (!in) numberOfTabs--;
	}

    /**
     * A menü kiírásért felelõs függvény a program könnyebb használhatósága érdekében.
     */
	public static void kiir_menu() {
		System.out.println("Menü: ");
		System.out.println("1.  Játékos ételt használ");
		System.out.println("2.  Játékos takarit");
		System.out.println("3.  Játékos lapáttal takarit");
		System.out.println("4.  Játékos targyat felvesz");
		System.out.println("5.  Játékos jégtáblára lép");
		System.out.println("6.  Játékos jégtáblára lép, átfordul");
		System.out.println("7.  Játékos lukra lép");
		System.out.println("8.  Játékos kiment egy társát");
		System.out.println("9.  Eszkimó iglut épit");
		System.out.println("10. Sarkkutató jégtáblát vizsgál");
		System.out.println("11. Rakéta elsütése");
		System.out.println("12. Hóvihar elkap egy karaktert");
		System.out.println("13. Hóvihar, de iglu megvéd");
		System.out.println("14: Játék menete");
		System.out.println("15: Hóvihar végigsöpör a jégmezõn");
		System.out.println("0.  Kilépés a menübõl");
	}

    /**
     * Elõször felépíti a szimulációs környezetet és az objektumok nevét eltárolja a Hashmapben, majd megvalósítja
     * a use caseket.
     * @param I A kiválasztott szimuláció sorszáma.
     */
	public static void valasztas(int I) {
		enableOutput(false);
		//variables for simulation------------------
		Karakter k = new Karakter();
		objects.put(k, "k");
		Karakter lukban= new Karakter();
		objects.put(lukban, "lukban");
		Karakter mento= new Karakter();
		objects.put(mento, "mento");
		Player p=new Player(k);
		objects.put(p, "p");
		Player p2=new Player(k);
		objects.put(mento, "mento");
		Player p3=new Player(k);
		objects.put(lukban, "lukban");
		Etel e= new Etel();
		objects.put(e, "e");
		Kotel kotel= new Kotel();
		objects.put(kotel, "kotel");
		Jegtabla j = new Jegtabla();
		objects.put(j, "j");
		Lapat l= new Lapat();
		objects.put(l, "l");
		Targy t=new Targy();
		objects.put(t, "t");
		Instabil ins = new Instabil();
		objects.put(ins, "ins");
		Luk luk= new Luk();
		objects.put(luk, "luk");
		Stabil stabil =new Stabil();
		objects.put(stabil, "stabil");
		Eszkimo eszk = new Eszkimo();
		objects.put(eszk, "eszk");
		Jegtabla kutatott = new Jegtabla();
		objects.put(kutatott, "kutatott");
		Sarkkutato sk = new Sarkkutato();
		objects.put(sk, "sk");
			//help for Jatektabla----------------------
			ArrayList<Player> p_array = new ArrayList<Player>();
			p_array.add(p);
			p_array.add(p2);
			p_array.add(p3);
			//------------------------------------------
		Jatektabla jatek = new Jatektabla(3, p_array);
		objects.put(jatek, "jatek");
		Alkatresz alk=jatek.getAlkatresz().get(0);
		Jegmezo jm = new Jegmezo(3);
		objects.put(jm, "jm");
		//------------------------------------------
		enableOutput(true);
		
		switch(I) {
		  case 1:
		  	  enableOutput(false);
			  j.ralepnek(k);
			  k.targy_hozzaadasa(e);
			  enableOutput(true);
			  //----------
			  k.hasznal(e, j);
		    break;
		  case 2:
		  	  enableOutput(false);
			  j.ralepnek(k);
			  int erosseg=1;
			  enableOutput(true);
			  //----------
			  k.takarit(erosseg);
		    break;
		  case 3:
		  	  enableOutput(false);
			  j.ralepnek(k);
			  enableOutput(true);
			  //----------
			  k.hasznal(l, j);
			 break;
		  case 4:
			  enableOutput(false);
			  j.ralepnek(k);
			  j.setTargy(t);
			  enableOutput(true);
			  //----------
			  boolean sikerult = k.targy_felvetele();
			  if(sikerult) System.out.println("Tárgy felvéve");
			  else System.out.println("Tárgy felvétel nem sikerült");
			  break;
		  case 5:
			  //----------
			  enableOutput(false);
			  j.ralepnek(k);
			  enableOutput(true);
			  boolean siker = k.lep(j);
			  if(siker) System.out.println("Lépés sikerült");
			  else System.out.println("Lépés nem sikerült");
			  break;
		  case 6:
		  	  enableOutput(false);
			  j.ralepnek(k);
			  enableOutput(true);
			  //----------
			  boolean hat = k.lep(ins);
			  if(hat) System.out.println("Lépés sikerült");
			  else System.out.println("Lépés nem sikerült");
			  break;
		  case 7:
		  	  enableOutput(false);
			  j.ralepnek(k);
			  enableOutput(true);
			  //----------
			  boolean het=k.lep(luk);
			  if(het) System.out.println("Lépés sikerült");
			  else System.out.println("Lépés nem sikerült");
			  break;
		  case 8:
			  enableOutput(false);
			  luk.ralepnek(lukban);
			  stabil.ralepnek(mento);
			  mento.targy_hozzaadasa(kotel);
			  enableOutput(true);
			  //----------
			  mento.hasznal(kotel, luk);
			  break;
		  case 9:
		  	  enableOutput(false);
			  j.ralepnek(eszk);
			  enableOutput(true);
			  //----------
			  if(eszk.iglut_epit())
				  System.out.println("Iglu építés sikerült");
			  else System.out.println("Iglu építés nem sikerült");
			  break;
		  case 10:
		  	  enableOutput(false);
			  j.ralepnek(sk);
			  enableOutput(true);
			  //----------
			  sk.megnez(kutatott);
			  break;
		  case 11:
		  	k.targy_hozzaadasa(alk);
		  	j.ralepnek(k);
		  	k.hasznal(alk, j);
			  break;
		  case 12:
			  //----------
			  j.ralepnek(k);
			  j.hovihar_volt();
			  break;	
		  case 13: //ez fura
		  	  enableOutput(false);
			  j.ralepnek(eszk);
			  enableOutput(true);
			  //----------
			  eszk.iglut_epit();
			  j.hovihar_volt();
			  break;	
		  case 14:

			  //----------
			  jatek.init();
		  	  break;
		  case 15:
			  //----------
		  	  jm.hovihar_indul();
		  	  break;
		  default:
		    // code block
		}
		numberOfTabs = -1;
	}
	
}